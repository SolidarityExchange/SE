<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Email-to-Letter Proxy --- The Solidarity Exchange</title>
<link href="https://fonts.googleapis.com/css2?family=EB+Garamond&amp;display=swap" rel="stylesheet"/>
<link href="styles.css" rel="stylesheet"/>
</head>
<body>
<div class="topbar-container">
<div class="logo">
<a href="index.html"><img alt="Logo" src="newlogotransparent.png"/></a>
</div>
<div class="social-links">
<a href="https://facebook.com" target="_blank">
<img alt="Facebook" src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg"/>
</a>
<a href="https://x.com" target="_blank">
<img alt="Twitter" src="https://upload.wikimedia.org/wikipedia/commons/c/ce/X_logo_2023.svg"/>
</a>
<a href="https://instagram.com" target="_blank">
<img alt="Instagram" src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png"/>
</a>
<a href="https://linkedin.com" target="_blank">
<img alt="LinkedIn" src="https://upload.wikimedia.org/wikipedia/commons/c/ca/LinkedIn_logo_initials.png"/>
</a>
</div>
</div>
<div class="content">
<div class="featured-container" style="text-align: left;">
<h1>Email-to-Letter Proxy Service</h1>
<form action="https://your-worker-name.workers.dev/send" id="proxyForm" method="POST">
<label for="prisoner">Select a prisoner:</label>
<select id="prisoner" name="prisoner" required=""></select>
<br/><br/>
<label for="mailingAddress">Mailing Address:</label><br/>
<textarea id="mailingAddress" name="mailingAddress" readonly="" required="" rows="5"></textarea>
<br/><br/>
<label for="moniker">Your Moniker (nickname or alias):</label><br/>
<input id="moniker" name="moniker" required="" type="text"/>
<br/><br/>
<label for="email">Your Email:</label><br/>
<input id="email" name="email" required="" type="email"/>
<br/><br/>
<label for="message">Your Message:</label><br/>
<textarea id="message" name="message" required="" rows="10"></textarea>
<br/><br/>
<button type="submit">Send Proxy Letter</button>
</form>
</div>

</div>
<div class="grid-container">
<div class="grid-item"><a href="registry.html">PRISONER REGISTRY</a></div>
<div class="grid-item"><a href="support.html">SUPPORTING PRISONERS</a></div>
<div class="grid-item"><a href="#">THE SOLIDARITY DISPATCH</a></div>
<div class="grid-item"><a href="aboutus.html">ABOUT US</a></div>
</div>
<script>
fetch('./prisoners.json')
  .then(res => res.json())
  .then(prisoners => {
    const select = document.getElementById("prisoner");
    const addressField = document.getElementById("mailingAddress");

    prisoners.forEach(p => {
      const option = document.createElement("option");
      option.value = p.id;
      option.textContent = p.name;
      option.dataset.address = p.mailing_address;
      select.appendChild(option);
    });

    select.addEventListener("change", () => {
      const selected = select.options[select.selectedIndex];
      addressField.value = selected.dataset.address || "";
    });

    if (select.options.length > 0) {
      select.selectedIndex = 0;
      select.dispatchEvent(new Event("change"));
    }
  })
  .catch(err => {
    console.error("Failed to load prisoners.json", err);
  });
</script></body>
</html>
