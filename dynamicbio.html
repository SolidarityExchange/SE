<!DOCTYPE html>
<html>
<head>
  <title>Prisoner Profile</title>
</head>
<body>
  <div id="profile-container"></div>

  <script>
  async function loadProfile() {
    const params = new URLSearchParams(window.location.search);
    const id = params.get('id');

    const res = await fetch('prisoners.json');
    const prisoners = await res.json();

    const prisoner = prisoners.find(p => p.id === id);

    const container = document.getElementById('profile-container');

    if (!prisoner) {
      container.innerHTML = "<p>Profile not found.</p>";
      return;
    }

    let html = `<h1>${prisoner.name || "Unnamed Prisoner"}</h1>`;

    if (prisoner.image_url) {
      html += `<img src="${prisoner.image_url}" alt="${prisoner.name}" style="max-width: 300px;">`;
    }

    if (prisoner.bio) {
      html += `<p>${prisoner.bio}</p>`;
    }

    if (prisoner.state) {
      html += `<p><strong>State:</strong> ${prisoner.state}</p>`;
    }

    if (prisoner.moneyGram) {
      html += `<p><strong>MoneyGram:</strong> ${prisoner.moneyGram}</p>`;
    }

    if (prisoner.profile_link && prisoner.profile_link !== "#") {
      html += `<p><a href="${prisoner.profile_link}">More info</a></p>`;
    }

    container.innerHTML = html;
  }

  loadProfile();
</script>
</body>
</html>
